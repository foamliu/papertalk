# PaperTalk 测试用例

## 1. 功能测试用例

### 1.1 应用启动与初始化
**TC-001: 应用冷启动测试**
- **前置条件**: 系统已安装PaperTalk应用
- **测试步骤**:
  1. 双击启动PaperTalk应用
  2. 观察启动时间
  3. 检查界面是否正常显示
- **预期结果**:
  - 启动时间 ≤ 3秒
  - 主界面正常显示，包含PDF阅读区和翻译面板
  - 标题栏显示"PaperTalk"

**TC-002: Ollama检测测试**
- **前置条件**: Ollama未安装或未运行
- **测试步骤**:
  1. 启动应用
  2. 观察是否弹出Ollama检测对话框
  3. 点击"前往Ollama官网下载"按钮
- **预期结果**:
  - 弹出Ollama检测对话框
  - 对话框内容正确显示
  - 点击按钮能正确跳转到Ollama官网

**TC-003: Ollama重试检测测试**
- **前置条件**: Ollama已安装但未运行
- **测试步骤**:
  1. 启动应用
  2. 点击"重试检测"按钮
  3. 启动Ollama服务
  4. 再次点击"重试检测"
- **预期结果**:
  - 第一次重试检测失败
  - 启动Ollama后重试检测成功
  - 对话框自动关闭

### 1.2 PDF文件操作
**TC-004: PDF文件打开测试**
- **前置条件**: 应用已启动，有可用的PDF文件
- **测试步骤**:
  1. 点击"打开PDF"按钮
  2. 选择有效的PDF文件
  3. 观察PDF渲染效果
- **预期结果**:
  - 文件选择对话框正常打开
  - PDF文件正确加载
  - 10页PDF渲染时间 ≤ 1秒
  - 页面导航功能正常

**TC-005: PDF拖拽打开测试**
- **前置条件**: 应用已启动，有可用的PDF文件
- **测试步骤**:
  1. 将PDF文件拖拽到应用窗口
  2. 观察PDF是否加载
- **预期结果**:
  - PDF文件正确加载
  - 页面显示正常

**TC-006: 无效文件类型测试**
- **前置条件**: 应用已启动
- **测试步骤**:
  1. 尝试打开非PDF文件（如.txt, .docx）
  2. 观察应用反应
- **预期结果**:
  - 文件选择对话框只显示PDF文件
  - 非PDF文件无法选择或打开失败

### 1.3 PDF阅读功能
**TC-007: 页面导航测试**
- **前置条件**: PDF文件已加载
- **测试步骤**:
  1. 使用页面导航按钮切换页面
  2. 使用键盘快捷键切换页面
  3. 直接输入页码跳转
- **预期结果**:
  - 页面切换流畅
  - 当前页码正确显示
  - 边界页面处理正确（第一页不能向前，最后一页不能向后）

**TC-008: 缩放功能测试**
- **前置条件**: PDF文件已加载
- **测试步骤**:
  1. 使用缩放功能放大PDF
  2. 使用缩放功能缩小PDF
  3. 测试缩放边界值
- **预期结果**:
  - 缩放功能正常
  - 缩放范围限制在50%-200%
  - 缩放后页面显示清晰

**TC-009: 夜间模式切换测试**
- **前置条件**: PDF文件已加载
- **测试步骤**:
  1. 点击夜间模式切换按钮
  2. 观察界面颜色变化
  3. 再次点击切换回日间模式
- **预期结果**:
  - 夜间模式正确应用深色主题
  - 日间模式正确应用浅色主题
  - 切换过程流畅无闪烁

### 1.4 划词翻译功能
**TC-010: 文本选择测试**
- **前置条件**: PDF文件已加载，包含英文文本
- **测试步骤**:
  1. 在PDF中选择一段英文文本
  2. 观察翻译面板的原文区域
- **预期结果**:
  - 选中的文本正确显示在原文区域
  - 翻译按钮变为可用状态

**TC-011: 翻译功能测试**
- **前置条件**: 已选择英文文本，Ollama服务正常运行
- **测试步骤**:
  1. 点击"翻译"按钮
  2. 观察翻译过程和结果
- **预期结果**:
  - 翻译按钮显示"翻译中..."状态
  - 翻译延迟 ≤ 800ms
  - 翻译结果正确显示在译文区域
  - 翻译完成后按钮恢复为"翻译"

**TC-012: 翻译失败处理测试**
- **前置条件**: 已选择英文文本，Ollama服务未运行
- **测试步骤**:
  1. 点击"翻译"按钮
  2. 观察错误处理
- **预期结果**:
  - 显示适当的错误信息
  - 翻译按钮恢复正常状态
  - 应用不崩溃

### 1.5 笔记功能
**TC-013: 笔记添加测试**
- **前置条件**: PDF文件已加载
- **测试步骤**:
  1. 在笔记输入框中输入内容
  2. 离开输入框或按回车
  3. 观察笔记列表
- **预期结果**:
  - 笔记正确保存
  - 笔记显示在历史笔记列表中
  - 笔记包含页码和时间信息
  - 笔记写入延迟 ≤ 200ms

**TC-014: 空笔记处理测试**
- **前置条件**: PDF文件已加载
- **测试步骤**:
  1. 在笔记输入框中输入空格或空内容
  2. 离开输入框
- **预期结果**:
  - 空笔记不被保存
  - 笔记列表不显示空笔记

**TC-015: 多笔记管理测试**
- **前置条件**: PDF文件已加载
- **测试步骤**:
  1. 在不同页面添加多个笔记
  2. 观察笔记列表的组织
- **预期结果**:
  - 所有笔记正确保存
  - 笔记按时间顺序显示
  - 笔记包含正确的页码信息

## 2. 边界测试用例

### 2.1 文件操作边界测试
**TC-101: 超大PDF文件测试**
- **前置条件**: 有超过100MB的PDF文件
- **测试步骤**:
  1. 尝试打开超大PDF文件
  2. 观察内存占用和性能
- **预期结果**:
  - 文件能够正常打开
  - 内存占用合理
  - 渲染性能可接受

**TC-102: 损坏PDF文件测试**
- **前置条件**: 有损坏的PDF文件
- **测试步骤**:
  1. 尝试打开损坏的PDF文件
- **预期结果**:
  - 显示适当的错误信息
  - 应用不崩溃

**TC-103: 空PDF文件测试**
- **前置条件**: 有空内容的PDF文件
- **测试步骤**:
  1. 尝试打开空PDF文件
- **预期结果**:
  - 显示适当的提示信息
  - 应用不崩溃

### 2.2 文本选择边界测试
**TC-104: 超长文本选择测试**
- **前置条件**: PDF文件包含长段落
- **测试步骤**:
  1. 选择超过1000字符的文本
  2. 尝试翻译
- **预期结果**:
  - 文本正确显示在原文区域
  - 翻译功能正常工作

**TC-105: 特殊字符文本测试**
- **前置条件**: PDF文件包含特殊字符
- **测试步骤**:
  1. 选择包含特殊字符的文本
  2. 尝试翻译
- **预期结果**:
  - 特殊字符正确处理
  - 翻译功能正常工作

### 2.3 性能边界测试
**TC-106: 多PDF连续打开测试**
- **前置条件**: 有多个PDF文件
- **测试步骤**:
  1. 连续快速打开多个PDF文件
- **预期结果**:
  - 应用响应正常
  - 内存占用稳定
  - 无内存泄漏

**TC-107: 快速页面切换测试**
- **前置条件**: 多页PDF文件已加载
- **测试步骤**:
  1. 快速连续切换页面
- **预期结果**:
  - 页面切换流畅
  - 应用不卡顿

## 3. 异常测试用例

### 3.1 网络异常测试
**TC-201: Ollama服务中断测试**
- **前置条件**: 应用正常运行，Ollama服务在运行
- **测试步骤**:
  1. 在翻译过程中停止Ollama服务
  2. 观察应用反应
- **预期结果**:
  - 显示适当的错误信息
  - 应用不崩溃
  - 可以重新检测Ollama状态

**TC-202: 网络连接超时测试**
- **前置条件**: 应用正常运行
- **测试步骤**:
  1. 模拟网络超时情况
  2. 尝试翻译操作
- **预期结果**:
  - 显示超时错误信息
  - 应用不崩溃

### 3.2 文件系统异常测试
**TC-203: 文件权限异常测试**
- **前置条件**: 有权限受限的PDF文件
- **测试步骤**:
  1. 尝试打开权限受限的PDF文件
- **预期结果**:
  - 显示权限错误信息
  - 应用不崩溃

**TC-204: 存储空间不足测试**
- **前置条件**: 系统存储空间接近满载
- **测试步骤**:
  1. 尝试添加笔记
  2. 观察应用反应
- **预期结果**:
  - 显示存储空间不足错误
  - 应用不崩溃

### 3.3 内存异常测试
**TC-205: 内存压力测试**
- **前置条件**: 系统内存使用率较高
- **测试步骤**:
  1. 在内存压力下打开PDF文件
  2. 进行翻译操作
- **预期结果**:
  - 应用性能可能下降但功能正常
  - 应用不崩溃

## 4. 兼容性测试用例

### 4.1 操作系统兼容性
**TC-301: Windows兼容性测试**
- **前置条件**: Windows 10/11系统
- **测试步骤**:
  1. 安装和运行应用
  2. 测试所有主要功能
- **预期结果**:
  - 所有功能正常工作
  - 界面显示正常

**TC-302: macOS兼容性测试**
- **前置条件**: macOS 10.15+系统
- **测试步骤**:
  1. 安装和运行应用
  2. 测试所有主要功能
- **预期结果**:
  - 所有功能正常工作
  - 界面显示正常

**TC-303: Linux兼容性测试**
- **前置条件**: Ubuntu 18.04+系统
- **测试步骤**:
  1. 安装和运行应用
  2. 测试所有主要功能
- **预期结果**:
  - 所有功能正常工作
  - 界面显示正常

### 4.2 屏幕分辨率兼容性
**TC-304: 高分辨率屏幕测试**
- **前置条件**: 4K或更高分辨率显示器
- **测试步骤**:
  1. 运行应用
  2. 测试界面缩放和显示
- **预期结果**:
  - 界面显示清晰
  - 所有控件大小合适

**TC-305: 低分辨率屏幕测试**
- **前置条件**: 1366x768或更低分辨率显示器
- **测试步骤**:
  1. 运行应用
  2. 测试界面布局
- **预期结果**:
  - 界面布局合理
  - 所有功能可访问

## 5. 安全测试用例

### 5.1 数据安全测试
**TC-401: 本地数据存储测试**
- **前置条件**: 应用已使用一段时间
- **测试步骤**:
  1. 检查本地存储的数据
  2. 验证数据加密情况
- **预期结果**:
  - 用户数据本地存储
  - 敏感信息适当保护

**TC-402: 网络通信安全测试**
- **前置条件**: 应用正常运行
- **测试步骤**:
  1. 监控与Ollama的通信
- **预期结果**:
  - 所有通信在本地进行
  - 无外部网络通信

## 6. 用户体验测试用例

### 6.1 界面交互测试
**TC-501: 快捷键功能测试**
- **前置条件**: PDF文件已加载
- **测试步骤**:
  1. 测试Ctrl+T翻译快捷键
  2. 测试Ctrl+B高亮快捷键
  3. 测试Ctrl+N新建笔记快捷键
  4. 测试Ctrl+O打开文件快捷键
- **预期结果**:
  - 所有快捷键正常工作
  - 快捷键响应及时

**TC-502: 界面响应性测试**
- **前置条件**: 应用正常运行
- **测试步骤**:
  1. 快速进行各种界面操作
  2. 观察界面响应速度
- **预期结果**:
  - 界面响应流畅
  - 无明显的延迟或卡顿

**TC-503: 错误提示友好性测试**
- **前置条件**: 模拟各种错误场景
- **测试步骤**:
  1. 触发各种错误
  2. 观察错误提示信息
- **预期结果**:
  - 错误信息清晰易懂
  - 提供解决问题的建议

## 测试执行说明

### 测试环境要求
- Windows 10/11, macOS 10.15+, 或 Ubuntu 18.04+
- 至少 8GB RAM
- 至少 10GB 可用存储空间
- Ollama服务（用于翻译功能测试）

### 测试优先级
- **高优先级**: TC-001, TC-002, TC-004, TC-010, TC-011, TC-013
- **中优先级**: TC-003, TC-005, TC-007, TC-008, TC-009, TC-012
- **低优先级**: 边界测试和异常测试用例

### 测试周期
- **每日构建测试**: 执行高优先级测试用例
- **版本发布测试**: 执行所有测试用例
- **回归测试**: 每次重大更新后执行完整测试套件

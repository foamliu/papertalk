# 文说 PaperTalk  
PC 端论文辅助阅读工具  
产品需求文档 PRD v0.1  
> 基于“用户自装 Ollama”的 MVP 极简版本（已拍板）

---

## 版本记录
| 日期 | 版本 | 说明 |
|---|---|---|
| 2025-10-17 | v0.0 | 初始 MVP 框架 |
| 2025-10-17 | v0.1 | 拍板确认默认模型 qwen3:8b-q4_K_M；MVP 完全免费，无 License 接口 |

---

## 1. 产品定位
一句话：把论文扔进文说，划词即出译文，全程本地跑模型，无隐私泄露。  
目标用户：计算机/理工科研究生、需要大量读英文 PDF 的科研人员。  
差异化：本地 LLM + 划词翻译 + 术语库，开箱不联网也能用。

---

## 2. MVP 功能清单（Must-Only）
| 模块 | 功能点 | 验收标准 |
|---|---|---|
| 安装与引导 | 1. 跨平台安装包（Win/Mac/Ubuntu）<br>2. 启动检测 Ollama 端口 11434 | 首次启动 ≤ 3 s；检测失败弹窗“一键跳转官网”转化率 ≥ 70 % |
| PDF 阅读器 | 1. 导入 PDF（文件/拖拽）<br>2. 目录导航、页码跳转、缩放、夜间模式 | 渲染 10 页论文 ≤ 1 s；内存占用 ≤ 300 MB |
| 划词翻译 | 1. 鼠标松开弹“翻译”按钮<br>2. 右侧译文区实时展示<br>3. 术语高亮+存入个人词库 | 首字延迟 ≤ 800 ms（RTX3060 q4_K_M） |
| 模型管理 | 1. 未检测到模型弹“一键拉取 qwen3:8b-q4_K_M”<br>2. 支持断点续传、暂停、删除 | 拉取成功率 ≥ 90 %；失败可重试 |
| 笔记 & 批注 | 1. 高亮文本 + 右侧笔记输入框<br>2. SQLite 本地存储 | 笔记写入 ≤ 200 ms；支持 Markdown #标签 |
| 更新 | 自动检查 GitHub Releases，一键下载新版 | 静默检查，不弹窗打断阅读 |

---

## 3. 技术方案（冻结）
- **框架**：Tauri + Rust（后端） + Vue3（前端）  
- **PDF 渲染**：pdfjs-dist 3.11，WebAssembly 已预编译，随包 8 MB  
- **LLM 调用**：Ollama HTTP API (127.0.0.1:11434)  
- **数据库**：SQLite 单文件 `<用户数据>/papers.db`  
- **默认模型**：qwen3:8b-q4_K_M（约 5.1 GB，中英均衡，官方推荐）  
- **打包体积**  
  - Win: 48 MB (msi)  
  - Mac: 45 MB (dmg)  
  - Ubuntu: 44 MB (deb)

---

## 4. 用户旅程（首会话 3 分钟闭环）
1. 下载安装包  
2. 启动  
3. 弹“未检测到 Ollama”  
4. 一键跳转官网下载安装  
5. 返回自动检测通过  
6. 弹“未检测到模型，立即拉取 5.1 GB？”  
7. 用户点击“拉取”  
8. 进度条 10–25 min 完成  
9. 自动打开示例 PDF  
10. 划词 → 右侧出现译文，Done。

---

## 5. 非功能需求
| 类别 | 要求 |
|---|---|
| 性能 | 冷启动 ≤ 3 s；划词翻译首包 ≤ 800 ms；内存 ≤ 300 MB（不含模型） |
| 离线 | 零网络可阅读、翻译、笔记；仅更新/拉模型需网络 |
| 可访问性 | 快捷键：Ctrl+T 翻译段落 / Ctrl+B 高亮 / Ctrl+N 新建笔记；支持 125 %/150 % 缩放 |
| 隐私 | 零 Telemetry 默认关闭；上传云盘需二次弹窗授权 |

---

## 6. 埋点指标（Posthog）
| 事件 | 目标值 |
|---|---|
| ollama_detect_fail | ≤ 35 % 首次启动 |
| ollama_install_success | ≥ 70 % 弹窗 UV |
| model_pull_success | ≥ 90 % 点击“拉取”UV |
| 1st_translation_success | ≥ 80 % 首划词 |
| d1_retention | ≥ 40 % 次日启动 |

---

## 7. 风险与对策
| 风险 | 对策 |
|---|---|
| 用户拒绝装 Ollama | 提供“在线翻译兜底”开关（迭代 2 再做） |
| 模型 5 GB 下载失败 | 断点续传；三次失败后给百度网盘镜像二维码 |
| 端口 11434 被占 | 自动尝试 11435–11439；仍失败则弹教程改 systemd |

---

## 8. 里程碑（6 周冻结）
| 周 | 任务 |
|---|----|
| W1 | 需求 & UI 原型冻结 |
| W2 | PDF 阅读器完成 |
| W3 | Ollama 检测 + 划词翻译 |
| W4 | 模型拉取 + 术语库 |
| W5 | Bug Bash + 签名打包 |
| W6 | 种子用户灰度（100 人） |

---

## 9. 商业模式（已拍板）
- MVP 完全免费，不预留 License 校验接口  
- 迭代 2 再评估云同步/高级模型订阅可能性

---

## 10. 输出物清单
- [x] 本 PRD Markdown 已归档 `/docs`  
- [ ] Figma 原型（4 页：启动检测 / 阅读器 / 翻译 / 笔记）  
- [ ] GitHub Project「MVP-6」任务板 & Issue 模板  
- [ ] Posthog 埋点事件名列表

---

> PRD v0.1 冻结，开发任务板已锁定，即刻进入编码。